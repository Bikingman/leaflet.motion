/*!
 * 
 *  leaflet.motion - v0.0.1 (https://github.com/Igor-Vladyka/leaflet.motion#readme) 
 *  Leaflet plugin that will allow to animate different leaflet map objects
 *  
 *  MIT (http://www.opensource.org/licenses/mit-license.php)
 *  (c) 2018  Igor Vladyka <igor.vladyka@gmail.com> (https://github.com/Igor-Vladyka/)
 * 
 */!function(t){var n={};function e(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:o})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(o,i,function(n){return t[n]}.bind(null,i));return o},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=6)}([function(t,n){L.Motion.Polygon=L.Polygon.extend({options:L.Motion.Animate.defaultOptions,initialize:function(t,n){this._linePoints=t[0].map(function(t){return L.Motion.Utils.toLatLng(t)}),this._linePoints.push(this._linePoints[0]),L.Polygon.prototype.initialize.call(this,[],n)}}),L.Motion.Polygon.include(L.Motion.Animate),L.motion.polygon=function(t,n){return new L.Motion.Polygon(t,n)}},function(t,n){L.Motion.Polyline=L.Polyline.extend({options:L.Motion.Animate.defaultOptions,initialize:function(t,n){this._linePoints=t.map(function(t){return L.Motion.Utils.toLatLng(t)}),L.Polyline.prototype.initialize.call(this,[],n)}}),L.Motion.Polyline.include(L.Motion.Animate),L.motion.polyline=function(t,n){return new L.Motion.Polyline(t,n)}},function(t,n){L.Motion.Utils={interpolateOnLine:function(t,n,e){var o=(n=n instanceof L.Polyline?n.getLatLngs():n).length;if(o<2)return null;if(0===(e=Math.max(Math.min(e,1),0)))return{latLng:n[0]instanceof L.LatLng?n[0]:L.latLng(n[0]),predecessor:-1};if(1==e)return{latLng:n[n.length-1]instanceof L.LatLng?n[n.length-1]:L.latLng(n[n.length-1]),predecessor:n.length-2};var i=t.getMaxZoom();i===1/0&&(i=t.getZoom());for(var r=[],a=0,u=0;u<o;u++)r[u]=t.project(n[u],i),u>0&&(a+=r[u-1].distanceTo(r[u]));var s=a*e,l=0,c=0;for(u=0;c<s;u++){var f=r[u],h=r[u+1];l=c,c+=f.distanceTo(h)}if(void 0==f&&void 0==h)f=r[0],h=r[1],u=1;var p=c-l!=0?(s-l)/(c-l):0,M=this.interpolateOnPointSegment(f,h,p);return{latLng:t.unproject(M,i),predecessor:u-1}},interpolateOnPointSegment:function(t,n,e){return L.point(t.x*(1-e)+e*n.x,t.y*(1-e)+e*n.y)},toLatLng:function(t,n,e){return t instanceof L.LatLng?t:L.Util.isArray(t)&&"object"!=typeof t[0]?3===t.length?L.latLng(t[0],t[1],t[2]):2===t.length?L.latLng(t[0],t[1]):null:void 0===t||null===t?t:"object"==typeof t&&"lat"in t?L.latLng(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===n?null:L.latLng(t,n,e)}}},function(t,n){L.Motion.Ease={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},easeInQuad:function(t,n,e,o,i){return o*(n/=i)*n+e},easeOutQuad:function(t,n,e,o,i){return-o*(n/=i)*(n-2)+e},easeInOutQuad:function(t,n,e,o,i){return(n/=i/2)<1?o/2*n*n+e:-o/2*(--n*(n-2)-1)+e},easeInCubic:function(t,n,e,o,i){return o*(n/=i)*n*n+e},easeOutCubic:function(t,n,e,o,i){return o*((n=n/i-1)*n*n+1)+e},easeInOutCubic:function(t,n,e,o,i){return(n/=i/2)<1?o/2*n*n*n+e:o/2*((n-=2)*n*n+2)+e},easeInQuart:function(t,n,e,o,i){return o*(n/=i)*n*n*n+e},easeOutQuart:function(t,n,e,o,i){return-o*((n=n/i-1)*n*n*n-1)+e},easeInOutQuart:function(t,n,e,o,i){return(n/=i/2)<1?o/2*n*n*n*n+e:-o/2*((n-=2)*n*n*n-2)+e},easeInQuint:function(t,n,e,o,i){return o*(n/=i)*n*n*n*n+e},easeOutQuint:function(t,n,e,o,i){return o*((n=n/i-1)*n*n*n*n+1)+e},easeInOutQuint:function(t,n,e,o,i){return(n/=i/2)<1?o/2*n*n*n*n*n+e:o/2*((n-=2)*n*n*n*n+2)+e},easeInSine:function(t,n,e,o,i){return-o*Math.cos(n/i*(Math.PI/2))+o+e},easeOutSine:function(t,n,e,o,i){return o*Math.sin(n/i*(Math.PI/2))+e},easeInOutSine:function(t,n,e,o,i){return-o/2*(Math.cos(Math.PI*n/i)-1)+e},easeInExpo:function(t,n,e,o,i){return 0==n?e:o*Math.pow(2,10*(n/i-1))+e},easeOutExpo:function(t,n,e,o,i){return n==i?e+o:o*(1-Math.pow(2,-10*n/i))+e},easeInOutExpo:function(t,n,e,o,i){return 0==n?e:n==i?e+o:(n/=i/2)<1?o/2*Math.pow(2,10*(n-1))+e:o/2*(2-Math.pow(2,-10*--n))+e},easeInCirc:function(t,n,e,o,i){return-o*(Math.sqrt(1-(n/=i)*n)-1)+e},easeOutCirc:function(t,n,e,o,i){return o*Math.sqrt(1-(n=n/i-1)*n)+e},easeInOutCirc:function(t,n,e,o,i){return(n/=i/2)<1?-o/2*(Math.sqrt(1-n*n)-1)+e:o/2*(Math.sqrt(1-(n-=2)*n)+1)+e},easeInElastic:function(t,n,e,o,i){var r=1.70158,a=0,u=o;if(0==n)return e;if(1==(n/=i))return e+o;if(a||(a=.3*i),u<Math.abs(o)){u=o;r=a/4}else r=a/(2*Math.PI)*Math.asin(o/u);return-u*Math.pow(2,10*(n-=1))*Math.sin((n*i-r)*(2*Math.PI)/a)+e},easeOutElastic:function(t,n,e,o,i){var r=1.70158,a=0,u=o;if(0==n)return e;if(1==(n/=i))return e+o;if(a||(a=.3*i),u<Math.abs(o)){u=o;r=a/4}else r=a/(2*Math.PI)*Math.asin(o/u);return u*Math.pow(2,-10*n)*Math.sin((n*i-r)*(2*Math.PI)/a)+o+e},easeInOutElastic:function(t,n,e,o,i){var r=1.70158,a=0,u=o;if(0==n)return e;if(2==(n/=i/2))return e+o;if(a||(a=i*(.3*1.5)),u<Math.abs(o)){u=o;r=a/4}else r=a/(2*Math.PI)*Math.asin(o/u);return n<1?u*Math.pow(2,10*(n-=1))*Math.sin((n*i-r)*(2*Math.PI)/a)*-.5+e:u*Math.pow(2,-10*(n-=1))*Math.sin((n*i-r)*(2*Math.PI)/a)*.5+o+e},easeInBack:function(t,n,e,o,i,r){return void 0==r&&(r=1.70158),o*(n/=i)*n*((r+1)*n-r)+e},easeOutBack:function(t,n,e,o,i,r){return void 0==r&&(r=1.70158),o*((n=n/i-1)*n*((r+1)*n+r)+1)+e},easeInOutBack:function(t,n,e,o,i,r){return void 0==r&&(r=1.70158),(n/=i/2)<1?o/2*(n*n*((1+(r*=1.525))*n-r))+e:o/2*((n-=2)*n*((1+(r*=1.525))*n+r)+2)+e},easeInBounce:function(t,n,e,o,i){return o-this.easeOutBounce(t,i-n,0,o,i)+e},easeOutBounce:function(t,n,e,o,i){return(n/=i)<1/2.75?o*(7.5625*n*n)+e:n<2/2.75?o*(7.5625*(n-=1.5/2.75)*n+.75)+e:n<2.5/2.75?o*(7.5625*(n-=2.25/2.75)*n+.9375)+e:o*(7.5625*(n-=2.625/2.75)*n+.984375)+e},easeInOutBounce:function(t,n,e,o,i){return n<i/2?.5*this.easeInBounce(t,2*n,0,o,i)+e:.5*this.easeOutBounce(t,2*n-i,0,o,i)+.5*o+e}}},function(t,n){L.Motion.Move={}},function(t,n){L.Motion=L.Motion||{Event:{Started:"started",Ended:"ended"}},L.motion=L.motion||{},L.Motion.Animate={defaultOptions:{pane:"polymotionPane",attribution:"Leaflet.Motion Â© "+(new Date).getFullYear()+" Igor Vladyka",auto:!1,easing:function(t){return t},speed:50},beforeAdd:function(t){t.getPane(this.options.pane)||(t.createPane(this.options.pane).style.zIndex=499),L.Polyline.prototype.beforeAdd.call(this,t)},onAdd:function(t){return this.options.duration||(this.options.duration=this.getBaseDistance(this._linePoints)/this.options.speed),L.Polyline.prototype.onAdd.call(this,t),this.options.auto&&this.startMotion(),this},onRemove:function(t){this.stopMotion(),L.Polyline.prototype.onRemove.call(this,t)},_motion:function(t){var n=(new Date).getTime()-t,e=n/this.options.duration;e=this.options.easing(e,n,0,1,this.options.duration);var o=L.Motion.Utils.interpolateOnLine(this._map,this._linePoints,e);this.addLatLng(o.latLng),e<1?L.Util.requestAnimFrame(function(){this._motion(t)},this):(this.setLatLngs(this._linePoints),this.stopMotion())},startMotion:function(){this.fire(L.Motion.Event.Started),this._motion((new Date).getTime())},stopMotion:function(){this.fire(L.Motion.Event.Ended)},getBaseDistance:function(t){for(var n=0,e=1;e<t.length;e++)n+=t[e].distanceTo(t[e-1]);return n}}},function(t,n,e){e(5),e(4),e(3),e(2),e(1),t.exports=e(0)}]);