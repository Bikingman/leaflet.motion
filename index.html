<!DOCTYPE html>
<html>
    <head>
    	<title>Leaflet motion plugin</title>
    	<meta charset="utf-8" />

    	<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
		  integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
		  crossorigin=""/>
		<link rel="stylesheet" href="https://leaflet.github.io/Leaflet.draw/src/leaflet.draw.css"/>
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"/>

		<script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet-src.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.2/leaflet.draw.js"></script>
		<script src="dist/leaflet.motion.min.js"></script>
		<!--script src="src/leaflet.motion.js"></script>
		<script src="src/leaflet.motion.utils.js"></script>
		<script src="src/leaflet.motion.easing.js"></script>
		<script src="src/layer/leaflet.motion.polyline.js"></script>
		<script src="src/layer/leaflet.motion.polygon.js"></script>
		<script src="src/layer/leaflet.motion.group.js"></script>
		<script src="src/layer/leaflet.motion.seq.js"></script-->

        <style>
            html, body, #map { width: 100%; height: 100%; margin: 0px; padding: 0px;}
			.leaflet-div-icon {
				background: transparent!important;
				border: none!important;
				color: white;
			}

			.red {
				color: red!important;
			}
        </style>
     </head>

    <body>

		<div id="map"></div>
    	<script>
			var map = L.map("map").setView([51, 1], 8);

			L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
				attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'
			}).addTo(map);

			var options = {
		        draw: {
		            circle: false, // Turns off this drawing tool
					polygon: true,
		            rectangle: false,
		            marker: false,
					circlemarker: false
		        }
		    };

			var drawControl = new L.Control.Draw(options);
		    map.addControl(drawControl);

		    map.on(L.Draw.Event.CREATED, function (e) {
		        var type = e.layerType,
		            layer = e.layer;

		        if (type === 'marker') {
		            layer.bindPopup('A popup!');
		        }

				if (type === "polyline") {
					var line = L.motion.polyline(layer.getLatLngs(), {
						color: "orange"
					}, {
						auto: true,
						easing: L.Motion.Ease.swing
					}).motionSpeed(100000).addTo(map);
				}

				if (type === "polygon") {
					L.motion.polygon(layer.getLatLngs(), {
						color: "red",
						fill: true,
						fillOpacity: 0.4
					},{
						auto: true
					}, {
						removeOnEnd: true,
						icon: L.divIcon({className:"red", html: "<i class='fa fa-superpowers fa-spin fa-2x' aria-hidden='true' motion-base='0'></i>", iconSize: L.point(24, 24), iconAnchor: L.point(5, 22)})
					}).motionDuration(10000).addTo(map);
				}


		    });

			var duration = 3000; // in ms === 3s

			var baseOptions = {
				color: "white",
			};

			var seqGroup = L.motion.seq([
					L.motion.polyline([[50,0], [51,0]], baseOptions, {
						easing: L.Motion.Ease.easeInOutQuad
					}, {
						removeOnEnd: true,
						icon: L.divIcon({html: "<i class='fa fa-snowflake-o fa-spin fa-2x' aria-hidden='true'></i>", iconSize: L.point(22, 24)})
					}).motionDuration(duration),
					L.motion.polyline([[51,0], [51,1]], baseOptions, {
						easing: L.Motion.Ease.easeInOutQuart
					}, {
						removeOnEnd: true,
						icon: L.divIcon({html: "<i class='fa fa-bicycle fa-2x' aria-hidden='true' motion-base='0'></i>", iconSize: L.point(22, 24)})
					}).motionDuration(duration),
					L.motion.polyline([[51,1], [50,1]], baseOptions, null, {
						removeOnEnd: true,
						icon: L.divIcon({html: "<i class='fa fa-motorcycle fa-2x' aria-hidden='true' motion-base='0'></i>", iconSize: L.point(22, 24)})
					}).motionDuration(duration),
					L.motion.polyline([[50,1], [50,0]], baseOptions, null, {
						removeOnEnd: true,
						icon: L.divIcon({html: "<i class='fa fa-car fa-2x' aria-hidden='true'></i>", iconSize: L.point(27.5, 24)})
					}).motionDuration(duration)
				]).addTo(map).startMotion();

			seqGroup.on("click", function(){
				seqGroup.pauseMotion();
			});

			seqGroup.on("dblclick", function(e){
				seqGroup.resumeMotion();
			});

			var greenLine = [[51,3], [51,1]];
			var motionGroup = L.motion.group([
					L.motion.polyline([[52,1], [51,1]], {
						color: "transparent",
						dashArray: "10 5 5",
					}, null , {

							removeOnEnd: true
					}).motionDuration(5000),

					L.motion.polyline([[52,2], [51,2]], {
						color: "white",
						dashArray: "10 5 5",
					}, null, {
						removeOnEnd: true,
						icon: L.divIcon({html: "<i class='fa fa-plug fa-2x' aria-hidden='true' motion-base='-45'></i>", iconSize: L.point(24, 24)})
					}).motionDuration(3000),

					L.motion.polyline([[52,3], [51,3]], {
						color: "red",
					}, null, {
						icon: L.divIcon({html: "<i class='fa fa-car fa-2x' aria-hidden='true'></i>", iconSize: L.point(27.5, 24)})
					}).motionDuration(3000)
				]).addTo(map);

			setTimeout(function(){
				motionGroup.startMotion();
			}, 1000);


    	</script>
    </body>

</html>
